if (self.CavalryLogger) { CavalryLogger.start_js(["iUZKT"]); }

__d('legacy:focus',['Focus'],(function a(b,c,d,e,f,g){b.Focus=c('Focus');}),3);
__d('PhotoInlineEditor',['csx','Arbiter','CSS','DOM','Event','Keys','Parent','PhotosConst','TextAreaControl','Tokenizer','$'],(function a(b,c,d,e,f,g,h){function i(j){'use strict';this.viewer=j;i.instances[this.viewer.getVersionConst()]=this;}i.prototype.toggleEditMode=function(j,k){'use strict';var l=c('Parent').byClass(c('$')(j),'photoUfiContainer');if(!l)return;c('CSS').conditionClass(l,'inlineEditMode',k);if(this.viewer.getVersionConst()==c('PhotosConst').VIEWER_SNOWLIFT){if(k)this.viewer.uncollapseRHC();c('CSS').conditionClass(c('DOM').find(document.body,"._4d3w"),'fbPhotoSnowliftEditMode',k);c('Arbiter').inform('reflow');}if(k){var m=c('DOM').scry(l,"._4ej textarea");if(m.length>0)c('TextAreaControl').getInstance(m[0]);}};i.prototype.activate=function(j){'use strict';this.toggleEditMode(j,true);};i.deactivateInstance=function(j,k){'use strict';i.getInstance(j).deactivate(k);};i.prototype.deactivate=function(j){'use strict';this.toggleEditMode(j,false);if(this.arbiterToken)this.arbiterToken.unsubscribe();if(this.escListener){this.escListener.remove();this.escListener=null;}if(this.ogListener){this.ogListener.remove();this.ogListener=null;}};i.prototype.acceptSuggestion=function(j,k){'use strict';var l=c('DOM').find(document.body,'.uiTokenizer.uiInlineTokenizer'),m=c('Tokenizer').getInstance(l),n={uid:j.getAttribute('data-id'),text:j.getAttribute('data-text')};m.addToken(m.createToken(n));var o=c('DOM').find(document.body,'#video_face_'+k);c('CSS').hide(o);};i.prototype.rejectSuggestion=function(j,k){'use strict';var l=c('DOM').find(document.body,'#video_face_'+k);c('CSS').addClass(l,'taggingMode');c('CSS').hide(l);};i.prototype.cancel=function(j){'use strict';this.deactivate(j);c('Arbiter').inform('PhotoInlineEditor.CANCEL_INLINE_EDITING');};i.prototype.addTagDetails=function(j,k){'use strict';var l=c('DOM').find(document.body,'.uiTokenizer.uiInlineTokenizer'),m=c('Tokenizer').getInstance(l),n={uid:k.subject,text:k.text};m.addToken(m.createToken(n));};i.prototype.attachForm=function(j){'use strict';this._form=j;return this;};i.prototype.getForm=function(){'use strict';return this._form;};i.prototype.subscribeTagging=function(){'use strict';this.subscribe=c('Arbiter').subscribe('PhotoTagger.ADDING_TAG',this.addTagDetails.bind(),c('Arbiter').SUBSCRIBE_NEW);};i.prototype.subscribeCancel=function(j){'use strict';var k=[this.viewer.getEventString('PAGE'),this.viewer.getEventString('CLOSE')];this.arbiterToken=c('Arbiter').subscribe(k,this.cancel.bind(this,j),c('Arbiter').SUBSCRIBE_NEW);this.escListener=c('Event').listen(document.documentElement,'keydown',function(event){if(c('Event').getKeyCode(event)===c('Keys').ESC)this.cancel(j);}.bind(this));};i.prototype.registerOGToken=function(j,k){'use strict';this.ogListener=c('Event').listen(j,'click',function(){c('DOM').remove(k);});};i.getInstance=function(j){'use strict';return i.instances[j];};i.instances={};f.exports=i;}),null);
__d('legacy:PhotoInlineEditor',['PhotoInlineEditor'],(function a(b,c,d,e,f,g){b.PhotoInlineEditor=c('PhotoInlineEditor');}),3);
__d('legacy:PhotoSnowlift',['PhotoSnowlift'],(function a(b,c,d,e,f,g){b.PhotoSnowlift=c('PhotoSnowlift');}),3);